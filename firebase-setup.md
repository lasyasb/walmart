# Firebase Firestore Database Setup for CoBudget

## Collections Overview

Your CoBudget app will automatically create these collections in Firestore when users interact with the app:

### 1. `budgets` Collection
Stores each user's monthly budget setting.

**Document ID**: User's Firebase UID
**Fields**:
- `budget` (number): The user's monthly budget amount
- `email` (string): User's email address
- `updatedAt` (timestamp): When the budget was last updated

**Example Document**:
```
Document ID: abc123useruid
{
  budget: 150.00,
  email: "user@example.com",
  updatedAt: 2025-06-22T07:30:00Z
}
```

### 2. `cart` Collection
Stores personal cart items for each user.

**Document ID**: Auto-generated by Firestore
**Fields**:
- `id` (string): Product ID from the catalog
- `name` (string): Product name
- `price` (number): Product price
- `category` (string): Product category (grocery, health, household, home)
- `tags` (array): Array of product tags
- `userEmail` (string): Email of user who added the item
- `userId` (string): Firebase UID of the user
- `addedAt` (timestamp): When item was added to cart

**Example Document**:
```
Document ID: auto-generated-id-123
{
  id: "1",
  name: "Great Value Whole Wheat Bread",
  price: 1.24,
  category: "grocery",
  tags: ["bread", "wheat", "food", "grocery"],
  userEmail: "user@example.com",
  userId: "abc123useruid",
  addedAt: 2025-06-22T07:30:00Z
}
```

### 3. `shared_cart` Collection
Stores items that users have shared with the group.

**Document ID**: Auto-generated by Firestore
**Fields**:
- `id` (string): Product ID from the catalog
- `name` (string): Product name
- `price` (number): Product price
- `category` (string): Product category
- `tags` (array): Array of product tags
- `addedBy` (string): Email of user who shared the item
- `addedAt` (timestamp): When item was shared

**Example Document**:
```
Document ID: auto-generated-id-456
{
  id: "4",
  name: "Mainstays Wedding Photo Frame",
  price: 12.88,
  category: "home",
  tags: ["wedding", "frame", "photo", "decoration", "home"],
  addedBy: "user@example.com",
  addedAt: 2025-06-22T07:30:00Z
}
```

### 4. `products` Collection (Optional - for future expansion)
This collection is not currently used by the app since products are stored in the Flask backend. However, you could create this if you want to manage products through Firebase in the future.

## Firebase Console Setup Steps

1. **Go to your Firebase Console**: https://console.firebase.google.com/
2. **Select your project** (the one you created earlier)
3. **Navigate to Firestore Database**:
   - Click "Firestore Database" in the left sidebar
   - If not already set up, click "Create database"
   - Choose "Start in test mode" for development
   - Select a location close to your users

4. **Security Rules** (Important!):
   In the "Rules" tab, make sure you have proper security rules. For development, you can use:
   ```javascript
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       // Allow read/write access to authenticated users only
       match /{document=**} {
         allow read, write: if request.auth != null;
       }
     }
   }
   ```

5. **Enable Authentication**:
   - Go to "Authentication" in the left sidebar
   - Click "Get started"
   - Go to "Sign-in method" tab
   - Enable "Email/Password" provider
   - Click "Save"

## What Happens When Users Use the App

- **First time users**: Collections will be empty
- **When a user sets a budget**: A document is created in `budgets` collection
- **When adding items to personal cart**: Documents are created in `cart` collection
- **When sharing items**: Documents are created in `shared_cart` collection
- **The app handles all database operations automatically** - no manual data entry needed!

## Monitoring Your Data

You can view all this data in real-time in your Firebase Console under Firestore Database. You'll see the collections appear as users start using your app.